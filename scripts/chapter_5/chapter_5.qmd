---
title: "Chapter 5"
format: html
---

R code 5.1
```{r}
# Load data and copy
rm(list = ls())
library(rethinking)
data("WaffleDivorce")
d <- WaffleDivorce

# standardize variables
d$D <- standardize(d$Divorce)
d$M <- standardize(d$Marriage)
d$A <- standardize(d$MedianAgeMarriage)
```

Create linear regression model for divorce as a function of median age marriage
R code 5.3
```{r}
m5.1 <- quap(
  alist(
    D ~ dnorm(mu, sigma),
    mu <- a + bA * A,
    a ~ dnorm(0, 0.2),
    bA ~ dnorm(0, 0.5),
    sigma ~ dexp(1)
  ), data = d
)
```

Simulate from the priors
R code 5.4
```{r}
set.seed(10)
prior <- extract.prior(m5.1)
mu <- link(m5.1, post = prior, data = list(A = c(-1, 2)))

plot(NULL, xlim = c(-2, 2), ylim = c(-2, 2))

for (i in 1:50)
  lines(c(-2, 2), mu[i, ], col = col.alpha("black", 0.4))
```

